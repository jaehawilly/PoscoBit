package Pack;

import java.net.InetSocketAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.*;
import java.io.*;

public class Server extends Application{

	public static void main(String[] args) {
		System.out.println("Server Start");
		
		try {
			ServerSocket serverSocket = new ServerSocket();
			System.out.println("메인 서버 소켓 생성");
			
			// port 번호 : 0~99999 사용 가능(0~1023은 관공서 port번호이므로 사용x)
			// 192.168.0.19 (내 pc ipv4 주소)
			// 127.0.0.1(localhost와 똑같은 주소)->일반적으로 localhost라고 적음
			//스스로에게 자기 자신이 누구인지 설정
			serverSocket.bind(new InetSocketAddress("192.168.0.19", 5000));
			System.out.println("바인딩 완료");
			
			// 누군가의 접속을 기다린다.(블록킹 함수)
			Socket socket = serverSocket.accept();
			System.out.println("누군가 접속됨");
			
		} catch (IOException e) {
			e.printStackTrace();
		}
		
		
		// 종료를 막기 위하여 코드 잔류.
		System.out.println("숫자를 입력하면 서버를 종료합니다.");
		new Scanner(System.in).nextInt();
		System.out.println("Server End");
	}

}

// 1. 접속을 할때마다 thread를 생성

// 2. 처음부터 thread를 1개만 만들어 놓고 Linkedlist를 사용해서 소켓 번호를 저장해놓음
// -> 게임에서 많이 사용(thread를 많이 만들 수 없는 환경이기 때문)